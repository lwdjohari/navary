# .clang-format â€” Google style baseline + C++20 tweaks

BasedOnStyle: Google
Language: Cpp
Standard: c++20

# --- Layout ---
ColumnLimit: 80
IndentWidth: 2
TabWidth: 2
UseTab: Never
ContinuationIndentWidth: 4

# --- Pointers & References ---
DerivePointerAlignment: false
PointerAlignment: Left
ReferenceAlignment: Left

# --- Braces / Short blocks ---
BreakBeforeBraces: Attach
AllowShortFunctionsOnASingleLine: Empty
AllowShortIfStatementsOnASingleLine: false
AllowShortLoopsOnASingleLine: false

# --- Namespaces / Access / Case labels ---
NamespaceIndentation: None
IndentAccessModifiers: false
IndentCaseLabels: true

# --- Includes (no reordering / regrouping) ---
SortIncludes: false
IncludeBlocks: Preserve
# Optional: also disable "main header first"
IncludeIsMainRegex: '^(?!)$'
IncludeIsMainSourceRegex: '^(?!)$'

# --- Spaces ---
SpaceAfterCStyleCast: false
SpaceBeforeRangeBasedForLoopColon: true
SpacesInParentheses: false
SpaceBeforeParens: ControlStatements
SpacesInAngles: false

# --- Alignments ---
AlignConsecutiveAssignments: Consecutive
AlignConsecutiveDeclarations: None
AlignTrailingComments: true
AlignAfterOpenBracket: Align

# --- Lambdas / Templates / Requires ---
AllowShortLambdasOnASingleLine: Empty
BinPackParameters: true
BinPackArguments: true
Cpp11BracedListStyle: true
RequiresClausePosition: WithPreceding

# --- Preprocessor ---
SpaceBeforeParensOptions:
  AfterControlStatements: true
  AfterFunctionDefinitionName: false
  AfterFunctionDeclarationName: false
  AfterOverloadedOperator: false
MacroBlockBegin: '^\\s*#\\s*if'
MacroBlockEnd: '^\\s*#\\s*endif'

# --- Comments ---
ReflowComments: true
CommentPragmas: '^ NOLINT|^ NOLINTNEXTLINE'

# --- Misc ---
KeepEmptyLinesAtTheStartOfBlocks: false
SortUsingDeclarations: true
